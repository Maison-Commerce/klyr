{% comment %} {% liquid 
  assign product = closest.product
  assign price = product.price 

  assign bundle_1_price = price | times: block.settings.qty_1 
  assign discount_1_amount = bundle_1_price | times: block.settings.dis_percentage_1 | divided_by: 100 
  assign bundle_1_discounted_price = bundle_1_price | minus: discount_1_amount 

  assign bundle_2_price = price | times: block.settings.qty_2 
  assign discount_2_amount = bundle_2_price | times: block.settings.dis_percentage_2 | divided_by: 100 
  assign bundle_2_discounted_price = bundle_2_price | minus: discount_2_amount 
%} 



 <div 
  class="product__block product-block__custom-quantity-bundle" 
  id="product-quantity-choice"
  {{ block.shopify_attributes }}
>
  <div class="bundle-card__wrapper">
    <label class="single-bundle-card first" data-option="one" for="qty_choice_1">
      <input class="sr-only" id="qty_choice_1" type="radio" name="qty_choice" value="{{ block.settings.qty_1 }}"  checked>
      <div class="sbc_top d-flex align-items-center">
        <span class="product-count pe-2">{{ block.settings.label_1 }}</span>
        {% if block.settings.save_text_1 != blank %}
          <span class="product-badge-active bg-red-dark">{{ block.settings.save_text_1 }}</span>
        {% endif %}
      </div>
      <div class="sbc_bottom d-flex align-items-center" {{ bundle_1_discounted_price }}>
        {% if bundle_1_price > bundle_1_discounted_price %}
          <p class="regular-price price">{{ bundle_1_price | money_without_trailing_zeros }} </p>
          <p class="product-price">{{ bundle_1_discounted_price | money_without_trailing_zeros }} </p>
        {% else %}
          <span class="price">{{ bundle_1_price | money_without_trailing_zeros }} </span>
        {% endif %}
      </div>
    </label>

    <label class="single-bundle-card" data-option="two" for="qty_choice_2">
      <input class="sr-only" id="qty_choice_2" type="radio" name="qty_choice" value="{{ block.settings.qty_2 }}">
      <div class="sbc_top d-flex align-items-center">
        <span class="product-count pe-2">{{ block.settings.label_2 }}</span>
        <span class="product-badge-active bg-red-dark">{{ block.settings.save_text_2 }}</span>
      </div>
      <div class="sbc_bottom d-flex align-items-center">
        <p class="regular-price price">{{ bundle_2_price | money_without_trailing_zeros }} </p>
        <p class="product-price">{{ bundle_2_discounted_price | money_without_trailing_zeros }} </p>
      </div>
    </label>
  </div>
</div> 
{% comment %} {% render 'custom-quantity-bundle', product: closest.product, block: block %} {% endcomment %}

{% schema %}
{
  "name": "Custom Quantity Bundle",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "First Label"
    },
    {
      "type": "text",
      "id": "label_1",
      "label": "Buy 1 label",
      "default": "Buy one"
    },
    {
      "type": "number",
      "id": "qty_1",
      "label": "Quantity",
      "default": 1
    },
    {
      "type": "number",
      "id": "dis_percentage_1",
      "label": "Discount Percentage",
      "default": 0
    },
    {
      "type": "text",
      "id": "save_text_1",
      "label": "Save Text"
    },
    {
      "type": "header",
      "content": "Second Label"
    },
    {
      "type": "text",
      "id": "label_2",
      "label": "Buy 2 label",
      "default": "Buy two"
    },
    {
      "type": "number",
      "id": "qty_2",
      "label": "Quantity",
      "default": 2
    },
    {
      "type": "number",
      "id": "dis_percentage_2",
      "label": "Discount Percentage",
      "default": 20
    },
    {
      "type": "text",
      "id": "save_text_2",
      "label": "Save Text",
      "default": "Save 20%"
    },
    {
      "type": "header",
      "content": "Third Label"
    },
    {
      "type": "text",
      "id": "label_3",
      "label": "Buy 3 label",
      "default": "Buy three"
    },
    {
      "type": "number",
      "id": "qty_3",
      "label": "Quantity",
      "default": 3,
      "info": "Leave blank if don't want to show Quantity 3"
    },
    {
      "type": "number",
      "id": "dis_percentage_3",
      "label": "Discount Percentage",
      "default": 30
    },
    {
      "type": "text",
      "id": "save_text_3",
      "label": "Save Text",
      "default": "Save 30%"
    },
    {
      "type": "text",
      "id": "most_popular",
      "label": "Most Popular",
      "default": "Most Popular"
    },
    {
      "type": "paragraph",
      "content": "t:content.resource_reference_product"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width of each label"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Custom Quantity Bundle",
      "category": "t:categories.product"
    }
  ]
}
{% endschema %} {% endcomment %}
{% comment %} 
{% liquid 
  assign product = closest.product
  assign price = product.price 

  assign bundle_1_price = price | times: block.settings.qty_1 
  assign discount_1_amount = bundle_1_price | times: block.settings.dis_percentage_1 | divided_by: 100 
  assign bundle_1_discounted_price = bundle_1_price | minus: discount_1_amount 

  assign bundle_2_price = price | times: block.settings.qty_2 
  assign discount_2_amount = bundle_2_price | times: block.settings.dis_percentage_2 | divided_by: 100 
  assign bundle_2_discounted_price = bundle_2_price | minus: discount_2_amount 
%} 

<style>
  .bundle-usp-wrapper {
    margin-top: 20px;
  }
  
  .quantity-switcher__usp-box {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    border-radius: 8px;
    margin-right: 10px;
    margin-bottom: 10px;
    font-size: 14px;
    transition: all 0.3s ease;
  }
  
  .quantity-switcher__usp-box svg {
    flex-shrink: 0;
  }
  
  /* Grey style for first option */
  .quantity-switcher__shipping-usp:not(.active) {
    background-color: #f5f5f5;
    color: #666;
  }
  
  /* Light red style for second option */
  .quantity-switcher__shipping-usp.active,
  .quantity-switcher__gift-usp.active {
    background-color: #ffe5e5;
    color: #d32f2f;
  }
  
  .bundle-usp-wrapper [data-usp-option] {
    display: none;
  }
  
  .bundle-usp-wrapper [data-usp-option].show {
    display: inline-flex;
  }
</style>

<div 
  class="product__block product-block__custom-quantity-bundle" 
  id="product-quantity-choice"
  {{ block.shopify_attributes }}
>
  <div class="bundle-card__wrapper">
    <label class="single-bundle-card first" data-option="one" for="qty_choice_1">
      <input class="sr-only" id="qty_choice_1" type="radio" name="qty_choice" value="{{ block.settings.qty_1 }}" checked>
      <div class="sbc_top d-flex align-items-center">
        <span class="product-count pe-2">{{ block.settings.label_1 }}</span>
        {% if block.settings.save_text_1 != blank %}
          <span class="product-badge-active bg-red-dark">{{ block.settings.save_text_1 }}</span>
        {% endif %}
      </div>
      <div class="sbc_bottom d-flex align-items-center" {{ bundle_1_discounted_price }}>
        {% if bundle_1_price > bundle_1_discounted_price %}
          <p class="regular-price price">{{ bundle_1_price | money_without_trailing_zeros }} </p>
          <p class="product-price">{{ bundle_1_discounted_price | money_without_trailing_zeros }} </p>
        {% else %}
          <span class="price">{{ bundle_1_price | money_without_trailing_zeros }} </span>
        {% endif %}
      </div>
    </label>

    <label class="single-bundle-card" data-option="two" for="qty_choice_2">
      <input class="sr-only" id="qty_choice_2" type="radio" name="qty_choice" value="{{ block.settings.qty_2 }}">
      <div class="sbc_top d-flex align-items-center">
        <span class="product-count pe-2">{{ block.settings.label_2 }}</span>
        <span class="product-badge-active bg-red-dark">{{ block.settings.save_text_2 }}</span>
      </div>
      <div class="sbc_bottom d-flex align-items-center">
        <p class="regular-price price">{{ bundle_2_price | money_without_trailing_zeros }} </p>
        <p class="product-price">{{ bundle_2_discounted_price | money_without_trailing_zeros }} </p>
      </div>
    </label>
  </div>

  <div class="bundle-usp-wrapper">
    <!-- USP for first option (grey) -->
    <div class="quantity-switcher__usp-box quantity-switcher__shipping-usp show" data-usp-option="one">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
        <path d="M8 1.61523C11.5261 1.61527 14.3848 4.47385 14.3848 8C14.3847 11.5261 11.5261 14.3847 8 14.3848C4.47385 14.3848 1.61527 11.5261 1.61523 8C1.61523 4.47382 4.47382 1.61523 8 1.61523ZM11.2979 6.125C11.0757 5.90317 10.7326 5.87539 10.4805 6.04199L10.3789 6.125L7.27734 9.22656L5.61133 7.71777C5.34516 7.47694 4.93325 7.49755 4.69238 7.76367C4.45172 8.02972 4.47252 8.44075 4.73828 8.68164L6.86426 10.6055C7.12107 10.8375 7.51493 10.8277 7.75977 10.583L11.2979 7.04492C11.5516 6.79112 11.5515 6.37883 11.2979 6.125Z" fill="currentColor"></path>
      </svg>
      <span class="quantity-switcher__usp-text">Free shipping from â‚¬50</span>
    </div>

    <!-- USP for second option (light red with active class) -->
    <div class="quantity-switcher__usp-box quantity-switcher__shipping-usp active" data-usp-option="two">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
        <path d="M8 1.61523C11.5261 1.61527 14.3848 4.47385 14.3848 8C14.3847 11.5261 11.5261 14.3847 8 14.3848C4.47385 14.3848 1.61527 11.5261 1.61523 8C1.61523 4.47382 4.47382 1.61523 8 1.61523ZM11.2979 6.125C11.0757 5.90317 10.7326 5.87539 10.4805 6.04199L10.3789 6.125L7.27734 9.22656L5.61133 7.71777C5.34516 7.47694 4.93325 7.49755 4.69238 7.76367C4.45172 8.02972 4.47252 8.44075 4.73828 8.68164L6.86426 10.6055C7.12107 10.8375 7.51493 10.8277 7.75977 10.583L11.2979 7.04492C11.5516 6.79112 11.5515 6.37883 11.2979 6.125Z" fill="currentColor"></path>
      </svg>
      <span class="quantity-switcher__usp-text">Free shipping</span>
    </div>

    <!-- Gift USP for second option -->
    <div class="gift_usp quantity-switcher__usp-box quantity-switcher__gift-usp active" data-usp-option="two">
      <svg id="fi_726532" width="16" height="16" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path fill="currentColor" d="M32,271.692v192c0,17.664,14.368,32,32,32h160v-224H32z"></path>
        <path fill="currentColor" d="M480,143.692H378.752c7.264-4.96,13.504-9.888,17.856-14.304c25.824-25.952,25.824-68.192,0-94.144
          c-25.088-25.28-68.8-25.216-93.856,0c-13.888,13.92-50.688,70.592-45.6,108.448h-2.304c5.056-37.856-31.744-94.528-45.6-108.448
          c-25.088-25.216-68.8-25.216-93.856,0C89.6,61.196,89.6,103.436,115.36,129.388c4.384,4.416,10.624,9.344,17.888,14.304H32
          c-17.632,0-32,14.368-32,32v48c0,8.832,7.168,16,16,16h208v-64h64v64h208c8.832,0,16-7.168,16-16v-48
          C512,158.06,497.664,143.692,480,143.692z M222.112,142.636c0,0-1.344,1.056-5.92,1.056c-22.112,0-64.32-22.976-78.112-36.864
          c-13.408-13.504-13.408-35.52,0-49.024c6.496-6.528,15.104-10.112,24.256-10.112c9.12,0,17.728,3.584,24.224,10.112
          C208.128,79.5,229.568,134.924,222.112,142.636z M295.776,143.692c-4.544,0-5.888-1.024-5.888-1.056
          c-7.456-7.712,13.984-63.136,35.552-84.832c12.896-13.024,35.456-13.088,48.48,0c13.44,13.504,13.44,35.52,0,49.024
          C360.128,120.716,317.92,143.692,295.776,143.692z"></path>
        <path fill="currentColor" d="M288,271.692v224h160c17.664,0,32-14.336,32-32v-192H288z"></path>
      </svg>
      <span class="quantity-switcher__usp-text">Free Tandrops</span>
    </div>
  </div>
</div>

<script>
  (function() {
    const radioInputs = document.querySelectorAll('input[name="qty_choice"]');
    const uspBoxes = document.querySelectorAll('[data-usp-option]');
    
    function updateUSPs() {
      const selectedOption = document.querySelector('input[name="qty_choice"]:checked');
      if (!selectedOption) return;
      
      const selectedLabel = selectedOption.closest('label').dataset.option;
      
      uspBoxes.forEach(box => {
        if (box.dataset.uspOption === selectedLabel) {
          box.classList.add('show');
        } else {
          box.classList.remove('show');
        }
      });
    }
    
    radioInputs.forEach(input => {
      input.addEventListener('change', updateUSPs);
    });
    
    // Initialize on load
    updateUSPs();
  })();
</script>

{% comment %} {% render 'custom-quantity-bundle', product: closest.product, block: block %} {% endcomment %}

{% schema %}
{
  "name": "Custom Quantity Bundle",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "First Label"
    },
    {
      "type": "text",
      "id": "label_1",
      "label": "Buy 1 label",
      "default": "Buy one"
    },
    {
      "type": "number",
      "id": "qty_1",
      "label": "Quantity",
      "default": 1
    },
    {
      "type": "number",
      "id": "dis_percentage_1",
      "label": "Discount Percentage",
      "default": 0
    },
    {
      "type": "text",
      "id": "save_text_1",
      "label": "Save Text"
    },
    {
      "type": "header",
      "content": "Second Label"
    },
    {
      "type": "text",
      "id": "label_2",
      "label": "Buy 2 label",
      "default": "Buy two"
    },
    {
      "type": "number",
      "id": "qty_2",
      "label": "Quantity",
      "default": 2
    },
    {
      "type": "number",
      "id": "dis_percentage_2",
      "label": "Discount Percentage",
      "default": 20
    },
    {
      "type": "text",
      "id": "save_text_2",
      "label": "Save Text",
      "default": "Save 20%"
    },
    {
      "type": "header",
      "content": "Third Label"
    },
    {
      "type": "text",
      "id": "label_3",
      "label": "Buy 3 label",
      "default": "Buy three"
    },
    {
      "type": "number",
      "id": "qty_3",
      "label": "Quantity",
      "default": 3,
      "info": "Leave blank if don't want to show Quantity 3"
    },
    {
      "type": "number",
      "id": "dis_percentage_3",
      "label": "Discount Percentage",
      "default": 30
    },
    {
      "type": "text",
      "id": "save_text_3",
      "label": "Save Text",
      "default": "Save 30%"
    },
    {
      "type": "text",
      "id": "most_popular",
      "label": "Most Popular",
      "default": "Most Popular"
    },
    {
      "type": "paragraph",
      "content": "t:content.resource_reference_product"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width of each label"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Custom Quantity Bundle",
      "category": "t:categories.product"
    }
  ]
}
{% endschema %} {% endcomment %}

{% liquid 
  assign product = closest.product
  assign current_variant = product.selected_or_first_available_variant
  assign price = current_variant.price
  assign compare_at_price = current_variant.compare_at_price
  
  assign bundle_1_price = price | times: block.settings.qty_1 
  assign discount_1_amount = bundle_1_price | times: block.settings.dis_percentage_1 | divided_by: 100 
  assign bundle_1_discounted_price = bundle_1_price | minus: discount_1_amount 
  
  assign bundle_2_price = price | times: block.settings.qty_2 
  assign discount_2_amount = bundle_2_price | times: block.settings.dis_percentage_2 | divided_by: 100 
  assign bundle_2_discounted_price = bundle_2_price | minus: discount_2_amount
  
  comment
    Calculate bundle compare-at prices if compare_at_price exists
  endcomment
  if compare_at_price and compare_at_price > price
    assign bundle_1_compare_at = compare_at_price | times: block.settings.qty_1
    assign bundle_2_compare_at = compare_at_price | times: block.settings.qty_2
  endif
%}

<style>
  .bundle-usp-wrapper {
    margin-top: 20px;
  }
  
  .quantity-switcher__usp-box {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 5px 8px;
    border-radius: 1px;
    margin-right: 8px;
    margin-bottom: 10px;
    font-size: 11px;
    transition: all 0.3s ease;
  }

  /* Desktop font size */
@media (min-width: 768px) {
  .quantity-switcher__usp-box {
    font-size: 13px;
  }
}
  
  .quantity-switcher__usp-box svg {
    flex-shrink: 0;
  }
  
  /* Grey style for first option */
  .quantity-switcher__shipping-usp:not(.active) {
    background-color: #f5f5f5;
    color: #666;
  }
  
  /* Light red style for second option */
  .quantity-switcher__shipping-usp.active,
  .quantity-switcher__gift-usp.active {
    background-color: #f2ece7;
    color: #887357;
  }
  
  .bundle-usp-wrapper [data-usp-option] {
    display: none;
  }
  
  .bundle-usp-wrapper [data-usp-option].show {
    display: inline-flex;
  }
</style>

<div 
  class="product__block product-block__custom-quantity-bundle" 
  id="product-quantity-choice"
  {{ block.shopify_attributes }}
>
  <div class="bundle-card__wrapper">
    <label class="single-bundle-card" data-option="two" for="qty_choice_2">
      <input class="sr-only" id="qty_choice_2" type="radio" name="qty_choice" value="{{ block.settings.qty_2 }}" checked>
      <div class="sbc_top d-flex align-items-center">
        <span class="product-count pe-2">{{ block.settings.label_2 }}</span>
        <span class="product-badge-active bg-red-dark">{{ block.settings.save_text_2 }}</span>
      </div>
      <div class="sbc_bottom d-flex align-items-center">
        <p class="regular-price price">{{ bundle_2_price | money_without_trailing_zeros }} </p>
        <p class="product-price">{{ bundle_2_discounted_price | money_without_trailing_zeros }} </p>
      </div>
    </label>



    {% comment %} <label class="single-bundle-card first" data-option="one" for="qty_choice_1">
      <input class="sr-only" id="qty_choice_1" type="radio" name="qty_choice" value="{{ block.settings.qty_1 }}" >
      <div class="sbc_top d-flex align-items-center">
        <span class="product-count pe-2">{{ block.settings.label_1 }}</span>
        {% if block.settings.save_text_1 != blank %}
          <span class="product-badge-active bg-red-dark">{{ block.settings.save_text_1 }}</span>
        {% endif %}
      </div>
      <div class="sbc_bottom d-flex align-items-center" {{ bundle_1_discounted_price }}>
        {% if bundle_1_price > bundle_1_discounted_price %}
          <p class="regular-price price">{{ bundle_1_price | money_without_trailing_zeros }} </p>
          <p class="product-price">{{ bundle_1_discounted_price | money_without_trailing_zeros }} </p>
        {% else %}
          <span class="price">{{ bundle_1_price | money_without_trailing_zeros }} </span>
        {% endif %}
      </div>
    </label> {% endcomment %}

    
  </div>

  <div class="bundle-usp-wrapper">
    <!-- USP for first option (grey) -->
    <div class="quantity-switcher__usp-box quantity-switcher__shipping-usp show" data-usp-option="one">
      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16" fill="none">
        <path d="M8 1.61523C11.5261 1.61527 14.3848 4.47385 14.3848 8C14.3847 11.5261 11.5261 14.3847 8 14.3848C4.47385 14.3848 1.61527 11.5261 1.61523 8C1.61523 4.47382 4.47382 1.61523 8 1.61523ZM11.2979 6.125C11.0757 5.90317 10.7326 5.87539 10.4805 6.04199L10.3789 6.125L7.27734 9.22656L5.61133 7.71777C5.34516 7.47694 4.93325 7.49755 4.69238 7.76367C4.45172 8.02972 4.47252 8.44075 4.73828 8.68164L6.86426 10.6055C7.12107 10.8375 7.51493 10.8277 7.75977 10.583L11.2979 7.04492C11.5516 6.79112 11.5515 6.37883 11.2979 6.125Z" fill="currentColor"></path>
      </svg>
      {% comment %} <span class="quantity-switcher__usp-text">
        
       

<p>Free shipping on orders over {%- render 'shipping-threshold-loader' -%}</p>
</span>
    </div>

    <!-- USP for second option (light red with active class) -->
    <div class="quantity-switcher__usp-box quantity-switcher__shipping-usp active" data-usp-option="two">
      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16" fill="none">
        <path d="M8 1.61523C11.5261 1.61527 14.3848 4.47385 14.3848 8C14.3847 11.5261 11.5261 14.3847 8 14.3848C4.47385 14.3848 1.61527 11.5261 1.61523 8C1.61523 4.47382 4.47382 1.61523 8 1.61523ZM11.2979 6.125C11.0757 5.90317 10.7326 5.87539 10.4805 6.04199L10.3789 6.125L7.27734 9.22656L5.61133 7.71777C5.34516 7.47694 4.93325 7.49755 4.69238 7.76367C4.45172 8.02972 4.47252 8.44075 4.73828 8.68164L6.86426 10.6055C7.12107 10.8375 7.51493 10.8277 7.75977 10.583L11.2979 7.04492C11.5516 6.79112 11.5515 6.37883 11.2979 6.125Z" fill="currentColor"></path>
      </svg>
      <span class="quantity-switcher__usp-text">Free shipping included</span>
    </div>

    <!-- Gift USP for second option -->
    <div class="gift_usp quantity-switcher__usp-box quantity-switcher__gift-usp active" data-usp-option="two">
      <svg id="fi_726532" width="12" height="12" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path fill="currentColor" d="M32,271.692v192c0,17.664,14.368,32,32,32h160v-224H32z"></path>
        <path fill="currentColor" d="M480,143.692H378.752c7.264-4.96,13.504-9.888,17.856-14.304c25.824-25.952,25.824-68.192,0-94.144
          c-25.088-25.28-68.8-25.216-93.856,0c-13.888,13.92-50.688,70.592-45.6,108.448h-2.304c5.056-37.856-31.744-94.528-45.6-108.448
          c-25.088-25.216-68.8-25.216-93.856,0C89.6,61.196,89.6,103.436,115.36,129.388c4.384,4.416,10.624,9.344,17.888,14.304H32
          c-17.632,0-32,14.368-32,32v48c0,8.832,7.168,16,16,16h208v-64h64v64h208c8.832,0,16-7.168,16-16v-48
          C512,158.06,497.664,143.692,480,143.692z M222.112,142.636c0,0-1.344,1.056-5.92,1.056c-22.112,0-64.32-22.976-78.112-36.864
          c-13.408-13.504-13.408-35.52,0-49.024c6.496-6.528,15.104-10.112,24.256-10.112c9.12,0,17.728,3.584,24.224,10.112
          C208.128,79.5,229.568,134.924,222.112,142.636z M295.776,143.692c-4.544,0-5.888-1.024-5.888-1.056
          c-7.456-7.712,13.984-63.136,35.552-84.832c12.896-13.024,35.456-13.088,48.48,0c13.44,13.504,13.44,35.52,0,49.024
          C360.128,120.716,317.92,143.692,295.776,143.692z"></path>
        <path fill="currentColor" d="M288,271.692v224h160c17.664,0,32-14.336,32-32v-192H288z"></path>
      </svg>
      <span class="quantity-switcher__usp-text">Free Tandrops</span>{% endcomment %}
     </div> 
  </div> 
</div>

<script>
  (function() {
    const radioInputs = document.querySelectorAll('input[name="qty_choice"]');
    const uspBoxes = document.querySelectorAll('[data-usp-option]');
    
    function updateUSPs() {
      const selectedOption = document.querySelector('input[name="qty_choice"]:checked');
      if (!selectedOption) return;
      
      const selectedLabel = selectedOption.closest('label').dataset.option;
      
      uspBoxes.forEach(box => {
        if (box.dataset.uspOption === selectedLabel) {
          box.classList.add('show');
        } else {
          box.classList.remove('show');
        }
      });
    }
    
    radioInputs.forEach(input => {
      input.addEventListener('change', updateUSPs);
    });
    
    // Initialize on load
    updateUSPs();
  })();
</script>

{% comment %} {% render 'custom-quantity-bundle', product: closest.product, block: block %} {% endcomment %}

{% schema %}
{
  "name": "Custom Quantity Bundle",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "First Label"
    },
    {
      "type": "text",
      "id": "label_1",
      "label": "Buy 1 label",
      "default": "Buy one"
    },
    {
      "type": "number",
      "id": "qty_1",
      "label": "Quantity",
      "default": 1
    },
    {
      "type": "number",
      "id": "dis_percentage_1",
      "label": "Discount Percentage",
      "default": 0
    },
    {
      "type": "text",
      "id": "save_text_1",
      "label": "Save Text"
    },
    {
      "type": "header",
      "content": "Second Label"
    },
    {
      "type": "text",
      "id": "label_2",
      "label": "Buy 2 label",
      "default": "Buy two"
    },
    {
      "type": "number",
      "id": "qty_2",
      "label": "Quantity",
      "default": 2
    },
    {
      "type": "number",
      "id": "dis_percentage_2",
      "label": "Discount Percentage",
      "default": 20
    },
    {
      "type": "text",
      "id": "save_text_2",
      "label": "Save Text",
      "default": "Save 20%"
    },
    {
      "type": "header",
      "content": "Third Label"
    },
    {
      "type": "text",
      "id": "label_3",
      "label": "Buy 3 label",
      "default": "Buy three"
    },
    {
      "type": "number",
      "id": "qty_3",
      "label": "Quantity",
      "default": 3,
      "info": "Leave blank if don't want to show Quantity 3"
    },
    {
      "type": "number",
      "id": "dis_percentage_3",
      "label": "Discount Percentage",
      "default": 30
    },
    {
      "type": "text",
      "id": "save_text_3",
      "label": "Save Text",
      "default": "Save 30%"
    },
    {
      "type": "text",
      "id": "most_popular",
      "label": "Most Popular",
      "default": "Most Popular"
    },
    {
      "type": "paragraph",
      "content": "t:content.resource_reference_product"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width of each label"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Custom Quantity Bundle",
      "category": "t:categories.product"
    }
  ]
}
{% endschema %}