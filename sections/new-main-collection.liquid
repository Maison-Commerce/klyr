<style>

</style>

<div class="collection-filterbar">
  <div class="container-max">
    <div class="coll-fil-inner">
      <ul>
        <!-- Placeholder Filter Toggle -->
        <li class="label"> 
          <span>Filter</span>
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <line x1="8.5" y1="2" x2="8.5" y2="15" stroke="#231C19" />
            <line x1="2" y1="8.5" x2="15" y2="8.5" stroke="#231C19" />
          </svg>
        </li>

        <!-- Sort Dropdown -->
        <li class="sort_by_dropdown">
          <form method="get" id="SortByForm">
            <select name="sort_by" id="SortBy" class="form-select border-0">
              {% for option in collection.sort_options %}
                <option value="{{ option.value }}" {% if collection.sort_by == option.value %}selected{% endif %}>
                  {{ option.name }}
                </option>
              {% endfor %}
            </select>
          </form>
        </li>

        <!-- Product Count -->
        <li class="ms-auto">
          <span>{{ collection.products_count }} Products</span>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="coll-product-show-wrap space-block-64 pt-0">
  <div class="container-fluid px-0">
    <div class="collection-product__grid">
      {% for product in collection.products %}
        <div class="collection-grid__item">
          <div class="single-product-wrap">
            <a href="{{ product.url }}" class="d-block w-100">
              <div class="single-product-card">
                <div class="product-img-wrap">
                  {% if product.metafields.custom.badge_text.value.badge_text.value != blank %}
                    <div class="product-cetagory">
                      <span class="product-badge-active{% unless product.metafields.custom.badge_text.value.enable_box.value %} bg-transparent{% endunless %}">{{ product.metafields.custom.badge_text.value.badge_text.value }}</span>
                    </div>
                  {% endif %}
                  <div class="product-img">
                    {% if product.featured_image %}
                      {% assign preview_image = product.metafields.custom.preview_image | default: product.featured_image %}
                      <img
                        src="{{ preview_image | image_url: width: 600 }}"
                        alt="{{ product.title | escape }}" width="auto" height="auto"
                      >
                    {% endif %}
                  </div>
                  {% comment %} <div class="product-overlay-btn">
                    <span class="addToCard">ADD TO CART</span>
                  </div> {% endcomment %}
                </div>
                <div class="product-content pb-0">
                  <h4 class="font-base">{{ product.title }}</h4>
                  <p class="font-small">{{ product.metafields.custom.short_description }}</p>
                </div>
              </div>
            </a>
          </div>
        </div>
      {% else %}
        <div class="col-12">
          <p class="text-center py-4">No products found in this collection.</p>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<!-- Optional: Submit form on change -->
<script>
  document.getElementById("SortBy").addEventListener("change", function () {
    this.form.submit();
  });
</script>

{% schema %}
{
  "name": "Collection Product Grid",
  "class": "collection-product-grid",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Collection Product Grid Settings"
    },
    {
      "type": "checkbox",
      "id": "show_filter",
      "label": "Show Filter",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Collection Grid",
      "category": "Custom"
    }
  ]
}
{% endschema %}
